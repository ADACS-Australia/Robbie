// input images are listed in this file, one image per line
params.image_file = "$baseDir/images.txt"

// database to use
params.db = 'sqlite3'
params.db_file = "$baseDir/flux_table.db"

// Warping stage
params.warp = false
params.ref_catalogue = "$baseDir/master.fits"
params.refcat_ra = 'ra'
params.refcat_dec = 'dec'

// name of monitoring file - set to null if not required
params.monitor='monitor.fits'

// calling stilts
params.stilts = "java -jar /data/nextflow/stilts/stilts.jar"

// Source finding params
params.region_file = "$baseDir/square.mim"

// output directory
params.output_dir = 'results/'

docker {
  runOptions='-u $(id -u):$(id -g)'
  enabled = true
}

singularity {
  enabled = false
}

process {

  publishDir = [path:params.output_dir, mode:'link', overwite:true]
  
  cpus = 1

  withLabel: 'aegean|bane|warp' {
    cpus = 4
    container = 'paulhancock/robbie-next'
  }
}


profiles {

    standard {
        process.executor = 'local'
    }

    zeus {
        process.executor = 'slurm'
        process.queue = 'workq'
        process.cpus = 28
        process.memory = '60 GB'
        process.time = '1 h'
    }

    magnus {
        process.executor = 'slurm'
        process.queue = 'workq'
        process.cpus = 24
        process.memory = '60 GB'
        process.time = '1 h'
    }
}